# Персональные предложения в розничном магазине

{% hint style="danger" %}
**IMSHOP Retail Protocol (IRP)** является объектом интеллектуальной собственности ООО «АЙ ЭМ СОЛЮШНЗ» (IMSHOP) и защищён как объект авторского права. Свидетельство о депонировании произведения № 023-014461 от 16 января 2023 г. подтверждает исключительные права ООО «АЙ ЭМ СОЛЮШНЗ» на данные технологии.

IMSHOP Retail Protocol создан по заказу ООО «АЙ ЭМ СОЛЮШНЗ». Использование IMSHOP Retail Protocol допустимо только при взаимодействии с ООО "АЙ ЭМ СОЛЮШНЗ" и наличии действующего лицензионного договора. Более подробно можно ознакомиться [здесь](../../api-license.md).
{% endhint %}

## Описание

Данный метод вызывается при сканировании QR кода в розничных магазинах, для получения индивидуального предложения для зарегистрированного покупателя на товар в магазине

## Запрос

* **`externalUserId`** - идентификатор покупателя
* **`locationId`** - идентификатор магазина (необязательно)
* **`itemId`** - идентификатор товара из фида (**`group_id`**, если есть группировка, или **`id`** если группировок нет)

### Пример запроса

```javascript
{
    "externalUserId": "123456789",
    "locationId": "0240",
    "itemId": "17888999"
}
```

## Ответ

* **`personalInStorePrice`** - персональная цена в данном магазине
* **`code`** - код для отображения на экране телефона для считывания на кассе
  * **`type`** - тип кода. поддерживаемые стандарты: code128, qr
  * **`value`** - значение, которое надо передать в коде

{% hint style="info" %}
При отсутствии предложений на данный товар необходимо ответить пустым телом с HTTP кодом 204
{% endhint %}

### Пример ответа

```json
{
    "personalInStorePrice": 499.00,
    "code": {
        "type": "qr",
        "value": "aaa-b-cc-d-88888"
    }    
}
```

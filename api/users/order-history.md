# История заказов

![](../../.gitbook/assets/image.png)

Для авторизованного пользователя доступна синхронизация истории заказов в мобильном приложении с его общей историей заказов.

### Запрос

`APP SERVER → INFRASTRUCTURE`

{% hint style="info" %}
От вас потребуется URL, на который наш сервер будет слать **POST**-запрос. Да, мы _запрашиваем_ данные через _POST_, а не через _GET_.
{% endhint %}

В вашу систему будут приходить вот такие данные:

```javascript
{
    "userIdentifier": "71234567890"
}
```

* `userIdentifier` — идентификатор пользователя \(обязательное поле\), полученный от системы клиента на этапе авторизации

**Ответ:**

```javascript
{
    "orders": [
        {
            "id": "111003",
            "createdOn": "1595872396",
            "status": "Доставлен в Махачкалу",
            "price": 1003.33,
            "trackingUrl": "https://www.cdek.ru/ru/tracking?order_id=1234567890",
            "items": [
                {
                    "privateId": "6527",
                    "configurationId": "3464",
                    "name": "Плюшевый медведь",
                    "price": 29336,
                    "quantity": 1,
                    "discount": 0,
                    "subtotal": 29336
                }
            ]
        }
    ]
}
```

* `id` — идентификатор заказа в вашей системе \(обязательное поле\)
* `createdOn` — дата создания заказа \(обязательное поле, [unix time stamp](https://en.wikipedia.org/wiki/Unix_time)\) 
* `status` — статус заказа \(обязательное поле\)
* `price` — цена заказа \(обязательное поле\)
* `trackingUrl` — ссылка на страницу отслеживания почтового или курьерского отправления \(необязательное поле\)
* `items` — набор товаров в заказе \(обязательное поле; массив может быть пустым\)
  * `privateId` — идентификатор товара в системе клиента \(обязательное поле\)
  * `configurationId` —идентификатор товарного предложения \(необязательное поле\)
  * `name` — название товара \(обязательное поле\)
  * `price` — цена за одну позицию \(необязательное поле\)
  * `quantity` — количество \(обязательное поле\)
  * `discount` — общая скидка \(необязательное поле\)
  * `subtotal` — итоговая стоимость \(обязательное поле\)

Идентификатор заказа может понадобиться пользователю для уточнения деталей в службе поддержки. Статус заказа — человекочитаемый, демонстрируется пользователю.

Дата создания заказа будет учитываться при сортировке во время слияния с локальной историей заказов.

{% hint style="info" %}
Следует помнить, что этот запрос будет приходить из нашего доверенного, [авторизованного](../general.md#avtorizaciya-api) сервера; это — не публичный API.
{% endhint %}

Любой другой ответ API будет расцениваться как отсутствие истории заказов.


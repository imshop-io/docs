# Проверка наличия товара

{% hint style="danger" %}
Дополнительные интеграции вводятся в эксплуатацию после завершения основных интеграций:

* [Оформление заказа](../oformlenie-zakaza.-dostavki-oplaty/order.md)
* [Доставки](../oformlenie-zakaza.-dostavki-oplaty/deliveries.md)
* [Оплаты](../oformlenie-zakaza.-dostavki-oplaty/payments.md)

Для подключения дополнительных интеграций обратитесь к вашему менеджеру в IMSHOP.IO
{% endhint %}

IMSHOP.IO позволяет при помощи webhook подключить получение актуальных остатков в реальном времени. Этот запрос используется для отображения наличия на карточке товара, а также контроля наличия товара в корзине и при оформлении заказа.

## Формат запроса и пример

### Пример

```javascript
{
  "city": "Москва",
  "configurationIds": ["12345", "23456", "34567"]
}
```

### Описание формата

* **`city`** - Город
* **`configurationIds`** - Список идентификаторов торговых предложений, для которых нужно получить остатки \(**`id`** из YML фида\)
* **`warehouseId`** - \(в разработке\) опционально, запрос остатков для одного конкретного магазина / склада

## Формат ответа и пример

### Описание формата

### Пример

```javascript
{
  "warehouses": [
    {
      "warehouseId": "1",
      "name": "ТЦ Авиапарк",
      "address": "Ходынский б-р, 4",
      "city": "Москва",
      "lat": 55.7905543,
      "lon": 37.5319846,
      "online": false,
      "public": true,
      "subway": "ЦСКА",
      "mall": "Авиапарк"
    }
  ],
  "availability": [{ 
    "id": "12345", 
    "warehouseId": "1", 
    "quantity": 10,
    "price": 100
  }]
}
```

### Описание формата

* **`warehouses`** - список магазинов
  * **`warehouseId`** - идентификатор магазина / склада
  * **`name`** - название 
  * **`address`** - адрес
  * **`city`** - город
  * **`lat`** - широта
  * **`lon`** - долгота
  * **`online`** - является складом интернет магазина, доставляющим в заданный город \(`true` / `false`\)
  * **`subway`** - метро
  * **`mall`** - название ТЦ
* **`availability`** - список наличия товаров
  * **`id`** - идентификатор торгового предложения
  * **`warehouseId`** - идентификатор магазина/склада
  * **`quantity`** - количество в данном магазине/складе
  * **`price`** - цена в данном магазине/складе \(опционально\)


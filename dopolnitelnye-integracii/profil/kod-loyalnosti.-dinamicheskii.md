# Код лояльности. Динамический

{% hint style="danger" %}
Мы работаем только через **POST**-запросы
{% endhint %}

## Описание

Данный метод позволяет получить код лояльности, который можно показывать в виде qr-кода или шрих-кода на кассе. При нажатии на кнопку "Показать код", открывается модальное окно. При этом отправляется запрос на получение нового кода. После получения нового кода, он отобразится в виде шрих-кода или qr-кода в зависимости от полученного типа.\
\
Порядок действий:

* Пользователь авторизовался в приложении
* Пользователь нажал на кнопку "Показать код" на витрине или в профиле, в блоке лояльности
* Ушел запрос на получение нового кода
* Пришел ответ с новым значением кода и типом кода
* В модальном окне отобразился шрих-код или qr-код

## Получение динамического кода лояльности

### Формат запроса

* **`userIdentifier`** - идентификатор пользователя в системе продавца (на сайте / в CRM итд)

#### Пример запроса

```javascript
{
    "userIdentifier": "1234567890",
}
```

### Формат ответа

* **`type`** - тип кода. Может быть равно `code128` или `qr`. Если code128 - то будет показываться шрих-код. Если qr - то будет показывать qr-код.&#x20;
* **`value`** - значение кода

#### Пример ответа

```javascript
{
    "type": "code128",
    "value": "1122334455"
}
```

## Примеры в картинках

<div>

<figure><img src="../../.gitbook/assets/Simulator Screen Shot - iPhone 14 - 2023-04-06 at 19.04.51.png" alt=""><figcaption></figcaption></figure>

 

<figure><img src="../../.gitbook/assets/Simulator Screen Shot - iPhone 14 - 2023-04-06 at 19.07.18.png" alt=""><figcaption></figcaption></figure>

 

<figure><img src="../../.gitbook/assets/Simulator Screen Shot - iPhone 14 - 2023-04-06 at 19.14.38.png" alt=""><figcaption></figcaption></figure>

 

<figure><img src="../../.gitbook/assets/Simulator Screen Shot - iPhone 14 - 2023-04-06 at 19.14.42.png" alt=""><figcaption></figcaption></figure>

</div>


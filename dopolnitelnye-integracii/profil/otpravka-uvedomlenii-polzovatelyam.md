# Отправка уведомлений пользователям

{% hint style="danger" %}
Мы работаем только через **POST**-запросы
{% endhint %}

{% hint style="info" %}
**Данная интеграция является API. То есть запрос идет в систему Imshop.**

Для получения URL обратитесь к менеджеру IMSHOP
{% endhint %}

{% hint style="info" %}
**Не подходит для массовых пушей**

Данная интеграция используется для персональных пушей (например: изменение статусов заказов, персональные предложения (или предложения сегментам), бонусы)\
\
Для массовых пушей используйте OneSignal
{% endhint %}

{% hint style="info" %}
**Пропускная способность**\
до 1000`userIds`можно передать в 1 запрос\
не больше 10 запросов в минуту
{% endhint %}

{% hint style="danger" %}
Дополнительные интеграции вводятся в эксплуатацию после завершения основных интеграций:

* [Оформление заказа](../../osnovnye-integracii/oformlenie-zakaza.md)
* [Доставки](../../osnovnye-integracii/dostavki.md)
* [Оплаты](../../osnovnye-integracii/oplaty.md)

Для подключения дополнительных интеграций обратитесь к вашему менеджеру в IMSHOP.IO
{% endhint %}

## Запрос

### Описание формата

* **`userIds`** - (строковый массив) идентификаторы покупателей в вашей системе. В их качестве также могут выступать номера телефонов без форматирования
* **`message`** - объект сообщения с двумя обязательными полями
  * **`title`** - заголовок уведомления
  * **`summary`** - текст уведомления
* **`deeplink`** - (опционально) deeplink, по которому будет осуществлён переход после запуска приложения, при старте через push-уведомление

### Пример

```json
{
    "userIds": [
        "79999999999"
    ],
    "message": {
      "title": "Заголовок уведомления",
      "summary": "Сообщение пользователю"
    },
    "deeplink": "slug://browse"
}
```

## Ответ

### Описание формата

* **`success`** - флаг успешного выполнения
* **`error`** - текст сообщения об ошибке, если запрос не удалось завершить корректно.
* **`message`** - дополнительный текст сообщения об ошибке, если запрос завершился с кодом статуса, отличающимся от **`200`**. При неверно заданных параметрах, здесь будут перечислены недостающие поля и/или ожидания по их формату

### Примеры

```json
{
    "success": true
}
```

```json
{
    "success": false,
    "error": "Integration is unavailable"
}
```

```json
{
    "error": "Bad Request",
    "message": "child \"userIds\" fails because [\"userIds\" must be an array]"
}
```

# Получение данных учётной записи

{% hint style="danger" %}
Мы работаем только через **POST**-запросы
{% endhint %}

<figure><img src="../../../.gitbook/assets/image (3) (1).png" alt=""><figcaption></figcaption></figure>

## Запрос данных пользователя по идентификатору

`APP SERVER → INFRASTRUCTURE`

{% hint style="info" %}
От вас потребуется URL, на который наш сервер будет слать **POST**-запрос. Да, мы _запрашиваем_ данные через _POST_, а не через _GET_.
{% endhint %}

В вашу систему будут приходить вот такие данные:

```json
{
    "userIdentifier": "123"
}
```

* **`userIdentifier`** — идентификатор пользователя (обязательное поле), полученный от системы клиента на этапе авторизации

Идентификатор пользователя — это номер телефона, адрес email, или любой другой идентификатор (например, логин), как договоримся. В случае с номером телефона мы присылаем только цифры, через семёрку.

**Ответ:**

```json
{
    "user": {
        "id": "123",
        "name": "Иванов Иван",
        "phone": "71234567890",
        "email": "ivanov@mail.com",
        "emailConfirmed": true,
        "bonuses": 10000,
        "units": "бонусов",
        "segments": ["registered", "loyal"],
        "age": 35,
        "gender": "male",
        "cardNumber": "456123789",
        "cardPercent": 5,
        "status": "Золотая карта",
        "cardColor": "#000000",
        "cardTextColor": "00000",
        "birthday": "1986-12-24",
        "loyaltyCards": [
            {
                "cardNumber": "4567890123",
                "bonuses": 5000,
                "status": "Серебряная карта",
                "cardColor": "#FFFFFF",
                "cardTextColor": "#FFFFFF"            
            }
        ]
    }
}
```

— объект «[Учётная запись пользователя](broken-reference)». Обязательное поле:

* **`id`** — идентификатор пользователя в вашей системе
* **`loyaltyCards`** — (необязательное поле) дополнительные карты лояльности, привязанные к профилю пользователя; можно передать несколько карт

В случае, если пользователь новый, и информации по нему никакой нет — допустимо присылать пустые поля (все, кроме **`id`**), или не присылать их вовсе.

{% hint style="info" %}
Следует помнить, что этот запрос будет приходить из нашего доверенного, [авторизованного](broken-reference) сервера; это — не публичный API.
{% endhint %}

**Ошибка: невозможно получить информацию**

```json
{
    "error": {
        "message": "Пользователя с таким идентификатором более не существует"
    }
}
```

* **`message`** — сообщение для пользователя, описывающее проблему (обязательное поле)

Как правило, такая ошибка возникать не будет, т.к. запрос данных пользователя по идентификатору будет происходить только для заранее авторизованных пользователей.

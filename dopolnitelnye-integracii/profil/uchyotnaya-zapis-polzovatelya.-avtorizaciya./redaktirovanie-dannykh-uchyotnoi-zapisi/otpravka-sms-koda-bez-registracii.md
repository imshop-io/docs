# Отправка смс кода без регистрации

{% hint style="info" %}
Данный раздел описывает хуки для отправки смс без отправки полей для регистрации.
{% endhint %}

## Хук 1. Запрос отправки смс кода на указанный номер

### Описание запроса

`APP SERVER → INFRASTRUCTURE`

{% code overflow="wrap" %}
```json
{
    "phone": "79424124124",
    "userIdentifier": "79333332222"
}Ï
```
{% endcode %}

* **`phone`** - номер телефона указанный для отправки кода
* **`userIdentifier`** -  id пользователя в системе клиента, который запрашивает отправку смс&#x20;



### Описание ответа

В ответ бекенд клиента должен отправить аналогичный [авторизации](../avtorizaciya-po-nomeru-telefona-+-sms.md) payload&#x20;

```json
 {
    "otp": {
        "timeout": 30,
        "attemptsLeft": 3,
        "message": "На номер 79424124124 отправлено сообщение с кодом",
        "codeLength": 4
    }
}
```

или

Возможно, SMS-шлюз не отзывается, либо нельзя использовать данный номер телефона

```json
{
    "error": {
        "message": "Превышено количество попыток входа"
    }
}
```

* **`message`** — сообщение для пользователя, описывающее проблему

## Хук 2. Подтверждение кода полученного из смс

{% hint style="info" %}
После получения кода пользователь должен ввести его в специальное поле, после чего бекенд imshop отправит следующий запрос&#x20;
{% endhint %}

### Описание запроса

```json
{
    "phone": "72312312312",
    "code": "1231",
    "userIdentifier": "71424124124"
}
```

* **`phone`** - номер на который был послан смс код
* **`code`** - код, введенный пользователем
* **`userIdentifier`** - id пользователя в системе клиента, который получил смс и ввел

### Описание ответа

В ответ бекенд клиента должен ответить следующее, если введенный код верен

```json
{
  "success": true
} 
```

И следующее если код неверен

```json
{
  "success": true,
  "error": "Неверный код"
} 
```

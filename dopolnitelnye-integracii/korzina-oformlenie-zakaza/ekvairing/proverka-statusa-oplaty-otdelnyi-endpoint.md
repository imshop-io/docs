# Проверка статуса оплаты (отдельный endpoint)

{% hint style="danger" %}
**IMSHOP Retail Protocol (IRP)** является объектом интеллектуальной собственности ООО «АЙ ЭМ СОЛЮШНЗ» (IMSHOP) и защищён как объект авторского права. Свидетельство о депонировании произведения № 023-014461 от 16 января 2023 г. подтверждает исключительные права ООО «АЙ ЭМ СОЛЮШНЗ» на данные технологии.

IMSHOP Retail Protocol создан по заказу ООО «АЙ ЭМ СОЛЮШНЗ». Использование IMSHOP Retail Protocol допустимо только при взаимодействии с ООО "АЙ ЭМ СОЛЮШНЗ" и наличии действующего лицензионного договора. Более подробно можно ознакомиться [здесь](../../../api-license.md).
{% endhint %}

### Отображение статуса платежа и списания средств в приложении (кнопка "повторить оплату")

{% hint style="warning" %}
Если в ендпоинте эквайринга вы не можете поддерживать проверку статуса оплаты то вы можете использовать этот метод на отдельном end поинте.
{% endhint %}

### **Пример запроса**

```json
{
    "command": "capture",
    "paymentMethodId": "sberbank/card",
    "paymentId": "7d0567f9-bf37-4e84-9580-86b68b8a0e81"
}
```

* **`command`** - запрос на проведение платежа и проверку факта списания (`capture`)
* **`paymentMethodId`** - выбранный покупателем способ оплаты. Берется из ответа [webhook получения способов оплат](../../../osnovnye-integracii/oplaty.md)
* **`paymentId`** - Идентификатор платежа

### **Пример ответа**

```json
{
    "success": true,
    "paymentId": "7d0567f9-bf37-4e84-9580-86b68b8a0e81",
    "paymentCaptured": true
}
```

* **`success`** - флаг успеха **`true`** / **`false`**
* **`paymentId`** - идентификатор платежа
* **`paymentCaptured`** - деньги успешно списаны
* **`error`** - текст ошибки если **`success`** = **`false`**

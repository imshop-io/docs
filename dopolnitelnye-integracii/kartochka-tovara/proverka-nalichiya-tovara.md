# Проверка наличия товара

{% hint style="danger" %}
Мы работаем только через **POST**-запросы
{% endhint %}

{% hint style="danger" %}
Дополнительные интеграции вводятся в эксплуатацию после завершения основных интеграций:

* [Оформление заказа](broken-reference)
* [Доставки](broken-reference)
* [Оплаты](broken-reference)

Для подключения дополнительных интеграций обратитесь к вашему менеджеру в IMSHOP.IO
{% endhint %}

IMSHOP.IO позволяет при помощи webhook подключить получение актуальных остатков в реальном времени. Этот запрос используется для отображения наличия на карточке товара, а также контроля наличия товара в корзине и при оформлении заказа.

{% hint style="info" %}
При наличии webhook-а обсчета корзины контроль наличия товара в корзине и при оформлении заказа реализуется через [webhook обсчета корзины](https://docs.imshop.io/dopolnitelnye-integracii/korzina-oformlenie-zakaza/raschet-korziny-skidok-ballov).&#x20;
{% endhint %}

## Формат запроса и пример

### Пример

```json
{
  "city": "Москва",
  "configurationIds": ["12345", "23456", "34567"]
}
```

### Описание формата

* **`city`** - Город
* **`configurationIds`** - Список идентификаторов торговых предложений, для которых нужно получить остатки (**`id`** из YML фида)

## Формат ответа и пример

### Описание формата

* **`warehouses`** - список магазинов
  * **`warehouseId`** - идентификатор магазина / склада
  * **`name`** - название&#x20;
  * **`address`** - адрес
  * **`city`** - город
  * **`lat`** - широта
  * **`lon`** - долгота
  * **`online`** - является складом интернет магазина, доставляющим в заданный город (**`true`** / **`false`**)
  * **`subway`** - метро
  * **`mall`** - название ТЦ
* **`availability`** - список наличия товаров
  * **`id`** - идентификатор торгового предложения
  * **`warehouseId`** - идентификатор магазина/склада
  * **`quantity`** - количество в данном магазине/складе
  * **`price`** - цена в данном магазине/складе (**необязательно, функция для аптек)**
  * **`remark` ** [- ](https://t.me/c/1288454566/81544)примечание, строка (необязательно), например: _Товар продается по цене розничного магазина Сочи_

### Пример

```json
{
  "warehouses": [
    {
      "warehouseId": "1",
      "name": "ТЦ Авиапарк",
      "address": "Ходынский б-р, 4",
      "city": "Москва",
      "lat": 55.7905543,
      "lon": 37.5319846,
      "online": false,
      "subway": "ЦСКА",
      "mall": "Авиапарк"
    }
  ],
  "availability": [{ 
    "id": "12345", 
    "warehouseId": "1", 
    "remark": "Товар продается по цене розничного магазина Сочи",
    "quantity": 10
    
  }]
}
```

## Наличие для предзаказа/ Квоты

* **`warehouses`** - список магазинов
  * **`warehouseId`** - идентификатор магазина / склада
  * **`name`** - название&#x20;
  * **`address`** - адрес
  * **`city`** - город
  * **`lat`** - широта
  * **`lon`** - долгота
  * **`online`** - является складом интернет магазина, доставляющим в заданный город **true**
  * **`subway`** - метро
  * **`mall`** - название ТЦ
*   **`availability`** - список наличия товаров

    * **`id`** - идентификатор торгового предложения
    * **`warehouseId`** - идентификатор магазина/склада
    * **`quantity`** - количество всегда 1 единица для каждого юзера




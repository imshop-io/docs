# Дополнительные товары

{% hint style="danger" %}
**IMSHOP Retail Protocol (IRP)** является объектом интеллектуальной собственности ООО «АЙ ЭМ СОЛЮШНЗ» (IMSHOP) и защищён как объект авторского права. Свидетельство о депонировании произведения № 023-014461 от 16 января 2023 г. подтверждает исключительные права ООО «АЙ ЭМ СОЛЮШНЗ» на данные технологии.

IMSHOP Retail Protocol создан по заказу ООО «АЙ ЭМ СОЛЮШНЗ». Использование IMSHOP Retail Protocol допустимо только при взаимодействии с ООО "АЙ ЭМ СОЛЮШНЗ" и наличии действующего лицензионного договора. Более подробно можно ознакомиться [здесь](../../api-license.md).
{% endhint %}

{% hint style="info" %}
Доп товары - это такие же товары как и остальные, но в корзину они попадают в поле **`addons`** родительского товара.

Доп. товары должны быть обязательно представлены в фиде, если товара нет в фиде, то он не будет показан покупателю, даже если его id будет передан в данном вебхуке.
{% endhint %}

## Формат запроса и пример <a href="#format-zaprosa-i-primer" id="format-zaprosa-i-primer"></a>

### Пример <a href="#primer" id="primer"></a>

```javascript

                {
                    "configurations":
                    [
                        {
                            "configurationId": "345215",
                            "selected":
                            ["1_1", "1_2"]
                        }
                    ],
                    "fiasId": "0c5b2444-70a0-4932-980c-b4dc0d3f02b5"
                }
            
```

### Описание формата <a href="#opisanie-formata" id="opisanie-formata"></a>

* **`configurationId`** - идентификатор торгового предложения, для которого нужно получить доп. товары (**`id`** из YML фида)
* **`selected`** - список ид выбранных пользователем доп. товаров
* **`fiasID`** - [фиас](https://www.alta.ru/fias/) региона из которого пришел запрос

‌

## Формат ответа и пример <a href="#format-otveta-i-primer" id="format-otveta-i-primer"></a>

### Пример <a href="#primer-1" id="primer-1"></a>

```javascript
[{  
  price: 1999,
	oldprice: 2999,
	groups: [
		{
			title: "Только один на выбор",
			type: "single",
			required: true,
			items: [
			{
				configurationId: "1_1",
				price: 999
			},
			{...}
		},
		{
			title: "Можно выбрать несколько",
			type: "multi",
			required: false,
			items: [
			{
				configurationId: "1_1",
				price: 999
			},
			{...}
		}
	]
},
{...}
]
```

### Описание формата <a href="#opisanie-formata-2" id="opisanie-formata-2"></a>

* **`price`** - итоговая цена товара вместе с допами
* **`oldprice`** - опционально,  цена вместе с допами до скидки
* **`groups`** - группы доп. товаров
  * **`title`** - заголовок группы  (например "_Основание для кровати")_
  * **`type`** - тип группы, **`single`** - можно выбрать только один товар,  **`multi`** - можно выбрать несколько  товаров
  * **`required`** - (опционально), если true, то покупатель обязательно должен выбрать доп. товар перед тем как положить в корзину
  * **`items`** - список доп. товаров
    * **`configurationId`** - идентификатор товара, должно совпадать с идентификатором товара из фида
    *   **`price`** - цена доп товара для отображения при выборе


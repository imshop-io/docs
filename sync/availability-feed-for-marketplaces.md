# Фиды наличия товаров \(для маркетплейсов\)

## Описание

Передача отдельного фида с наличием товаров в интернет магазине / рознице, позволит IMSHOP.IO отображать в приложении актуальное наличие товаров, а также фильтровать товары по наличию в конкретном магазине \(функционал "я в магазине", если он доступен в вашем тарифном плане\)

{% hint style="info" %}
Помимо фидов наличия, IMSHOP.IO также поддерживает [API / webhook для проверки наличия товаров в реальном времени](../api/availability.md) в момент изменения корзины, просмотра карточки товара и оформлении заказа. На наличие фида остатков позволит фильтровать товары по наличию в магазинах.
{% endhint %}

## Подключение

Для настройки синхронизации наличия товаров, необходимо передать следующие данные вашему личному менеджеру в IMSHOP.IO:

* URL, по которому можно скачать каталог товаров в описанном формате
* Логин/пароль, если требуется HTTP-авторизация для доступа к выгрузке товаров
* Желаемое время обновления фида остатков \(например, раз в 15 минут\)

## Пример

```markup
<?xml version="1.0" encoding="utf-8" ?>
<inventory>
    <outlets>
        <outlet id="1">
            <name>DNS</name>
            <online>true</online>
            <url>https://www.dns-shop.ru/</url>
            <logo>https://upload.wikimedia.org/wikipedia/ru/c/c0/DNSLogo.png</logo>
        </outlet>
        <outlet id="2">
            <name>М.Видео</name>
            <online>true</online>
            <url>https://www.mvideo.ru/</url>
            <logo>https://upload.wikimedia.org/wikipedia/commons/3/36/MVideo_2014.png</logo>
        </outlet>
    <outlets>
    <availability>
        <product
            id="1267868123"
            barcode="659849528550"
            outlet="1"
            quantity="9"
            price="999"
            oldprice="999"
            url="https://xxxxxxxxx"
            purchaseUrl="https://xxxxxxxxx"
            deliveryPrice="350"
            deliveryDays="0"
            deliveryNotes="Доставим в день заказа"
            storeNotes=""
        />
        <product
            id="1267868123"
            barcode="659849528550"
            outlet="2"
            quantity="18"
            price="999"
            oldprice="999"
            url="https://xxxxxxxxx"
            purchaseUrl="https://xxxxxxxxx"
            deliveryPrice="0"
            deliveryDays="3"
            deliveryNotes=""
            storeNotes=""
        />
    </availability>
</inventory>
```

## Описание формата

### outlets -&gt; outlet

Список магазинов

* **`id` \(аттрибут\)** - идентификатор магазина
* **`name`** - название
* **`online`** - всегда `true` 
* **`url`** - веб адрес магазина
* **`logo`** - ссылка на логотип \(JPG или PNG\)

### availability -&gt; product

Описание наличия одного товара для каждого магазина. Все свойства передаются как аттрибуты.

{% hint style="warning" %}
Даже если товара нет в наличии в магазине, рекомендуем передать запись для товара и магазина, с **`quantity`** равным **`0`**
{% endhint %}

* **`id`** - идентификатор товарного предложения \(**`id`** из YML фида\)
* **`xmlId`** \(опционально\) - идентификатор товара во внешней системе учета наличия на складах \(например в 1С\)
* **`barcode`** \(опционально\) - штрих-код
* **`outlet`** - идентификатор магазина из `outlets -> outlet`
* **`quantity`** - количество товарв в наличии в этом магазине
* **`price`** - цена
* **`oldprice`** - цена до скидки \(опционально\)
* **`url`** - ссылка на страницу товара в магазине \(опционально
* **`purchaseUrl`** - ссылка на покупки \(опционально\)
* **`deliveryPrice`** - цена доставки \(опционально\). 0 = бесплатно.
* **`deliveryDays`** - минимальный срок доставки в днях \(опционально\). 0 = в день заказа. 1 = на следующий день
* **`deliveryNotes`** - \(опционально\) краткий коментарий к доставке. отображается на карточке товара
* **`storeNotes`** \(опционально\) любой текстовый коментарий. отображается на карточке товара.

